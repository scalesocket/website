<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ScaleSocket - Documentation</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
    <link rel="manifest" href="/assets/site.webmanifest">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/styles/base16/dracula.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/highlight.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css"
        integrity="sha256-XoaMnoYC5TH6/+ihMEnospgm0J1PM/nioxbOUdnM8HY=" crossorigin="anonymous">
</head>

<body class="antialiased text-slate-700 dark:text-slate-400 bg-white dark:bg-slate-900">
    <div id="app" class="max-w-6xl flex flex-col min-h-screen font-roboto mx-auto space-y-10">
        <header>
            <nav
                class="flex items-center justify-center sm:justify-between flex-wrap xs:flex-nowrap p-4 md:p-6 border-gray-100 dark:border-gray-600 border-b">
                <div class="flex px-4 items-center shrink-0 text-white md:mr-6 text-teal-500 ">
                    <img src="assets/image.svg" class="fill-current h-8 w-8 mr-2" alt="ScaleSocket">
                    <span
                        class="text-xl ml-2 tracking-tight text-slate-700 dark:text-slate-200"><strong>Scale</strong>Socket</span>
                </div>
                <div class="w-full block sm:grow flex items-center justify-start w-auto">
                    <nav class="w-full block grow flex items-center w-auto">
                        <a href="index.html"
                            class="rounded-lg px-3 py-2 text-slate-700 dark:text-slate-300 font-medium hover:bg-slate-100 dark:hover:bg-slate-200 hover:text-slate-900">Home</a>
                        <a href="about.html"
                            class="rounded-lg px-3 py-2 text-slate-700 dark:text-slate-300 font-medium hover:bg-slate-100 dark:hover:bg-slate-200 hover:text-slate-900">About</a>
                        <a href="docs.html"
                            class="rounded-lg px-3 py-2 text-slate-700 dark:text-slate-300 font-bold hover:bg-slate-100 dark:hover:bg-slate-200 hover:text-slate-900">Docs</a>
                    </nav>
                    <div class="whitespace-nowrap">
                        <a href="https://github.com/scalesocket/scalesocket"
                            class="inline-block rounded-lg px-3 py-2 text-slate-700 dark:text-slate-300 font-medium hover:text-slate-900 dark:hover:text-slate-400"><i
                                class="fa fa-github fa-lg"></i> <span class="hidden sm:inline">Github</span></a>
                    </div>
                </div>
            </nav>
        </header>
        <section>
            <div class="flex flex-row flex-wrap items-start justify-center max-w-full mx-4">
                <div class="flex w-auto lg:w-64 justify-center mx-8 mb-8">
                    <h1 class="inline text-4xl whitespace-normal font-bold text-transparent bg-clip-text bg-gradient-to-br from-green-400 to-blue-600 text-center"
                        id="installation">Installing.</h1>
                </div>
                <div class="grow flex-col max-w-2xl min-w-full md:min-w-[28rem] space-y-2">
                    <h1 class="text-2xl font-bold text-teal-500">Installing.</h1>
                    <h2 class="text-xl font-semibold">Docker (all platforms)</h2>
                    <p>
                        A pre-built Docker image is available for all systems from <a href="https://hub.docker.com/r/scalesocket/scalesocket" rel="noreferrer noopener">Docker Hub</a>.
                    </p>
                    <div class="overflow-scroll rounded shadow-lg dark:shadow-cyan-600/10 bg-slate-800">
                        <pre
                            class="min-h-full text-xs md:text-xs-2 language-console"><code class="text-slate-200 dark:text-slate-100 dark:bg-slate-800">$ docker run --rm scalesocket/scalesocket:latest scalesocket --help</code></pre>
                    </div>
                    <h2 class="text-xl font-semibold">Cargo (all platforms)</h2>
                    <p>
                        If you have installed the Rust toolchain, you can also install using cargo:
                    </p>
                    <div class="mt-4 overflow-scroll rounded shadow-lg dark:shadow-cyan-600/10 bg-slate-800">
                        <pre
                            class="min-h-full text-xs md:text-xs-2 language-console"><code class="relative block text-slate-200 dark:text-slate-100 p-4 dark:bg-slate-800">cargo install --force scalesocket</code></pre>
                    </div>
                    <h2 class="text-xl font-semibold">Binary release (linux)</h2>
                    <p>
                        Binary releases are available for <b>linux</b> via <a class="text-cyan-600"
                            href="https://github.com/scalesocket/scalesocket/releases">github</a>, or using the
                        commandline:
                    </p>
                    <div class="mt-4 overflow-scroll rounded shadow-lg dark:shadow-cyan-600/10 bg-slate-800">
                        <pre
                            class="min-h-full text-xs md:text-xs-2 language-console"><code class="relative block text-slate-200 dark:text-slate-100 p-4 dark:bg-slate-800">$ VERSION=v0.1.4 curl -SL "https://github.com/scalesocket/scalesocket/releases/download/${VERSION}/scalesocket_${VERSION}_x86_64-unknown-linux-musl.tar.gz" | tar -xzC /usr/bin</code></pre>
                    </div>
                </div>
            </div>
        </section>
        <section>
            <div class="flex flex-row flex-wrap items-start justify-center max-w-full mx-4">
                <div class="flex w-auto lg:w-64 justify-center mx-8 mb-8">
                    <h1 class="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-br from-green-400 to-blue-600 text-center"
                        id="getting-started">Getting started.</h1>
                </div>
                <div class="grow flex-col max-w-2xl min-w-full md:min-w-[28rem] space-y-2">
                    <h1 class="text-2xl font-bold text-teal-500">Server example.</h1>
                    <p>
                        Let's use a shell script and turn it into a websocket server.
                    </p>
                    <p class="pt-4">
                        Create the file <span
                            class="font-mono bg-sky-50 rounded p-1 dark:text-slate-100 dark:bg-slate-800">example.sh</span>
                        with the follow
                        content:
                    </p>
                    <div class="mt-4 overflow-scroll rounded shadow-lg dark:shadow-cyan-600/10 bg-slate-800">
                        <pre class="min-h-full text-xs md:text-xs-2 language-sh"><code class="relative block text-slate-200 dark:text-slate-100 p-4 dark:bg-slate-800">#!/bin/sh
echo '{"message": "hello world"}'
sleep 1
echo '{"message": "goodbye"}'
sleep 1
</code></pre>
                    </div>
                    <p class="pt-4">
                        Make the file executable by issuing:
                    </p>
                    <div class="mt-4 overflow-scroll rounded shadow-lg dark:shadow-cyan-600/10 bg-slate-800">
                        <pre
                            class="min-h-full text-xs md:text-xs-2 language-console"><code class="relative block text-slate-200 dark:text-slate-100 p-4 dark:bg-slate-800">$ chmod u+x example.sh</code></pre>
                    </div>
                    <p class="pt-4">
                        We can now serve the script as a websocket endpoint.
                    </p>
                    <div class="mt-4 overflow-scroll rounded shadow-lg dark:shadow-cyan-600/10 bg-slate-800">
                        <pre class="min-h-full text-xs md:text-xs-2 language-console"><code class="relative block text-slate-200 dark:text-slate-100 p-4 dark:bg-slate-800">$ scalesocket --frame=json ./example.sh
INFO listening at 0.0.0.0:9000</code></pre>
                    </div>
                    <p>
                        or, alternatively, using Docker
                    </p>
                    <div class="mt-4 overflow-scroll rounded shadow-lg dark:shadow-cyan-600/10 bg-slate-800">
                        <pre class="min-h-full text-xs md:text-xs-2 language-console"><code class="relative block text-slate-200 dark:text-slate-100 p-4 dark:bg-slate-800">$ docker run --rm \
    -p 9000:9000 \
    -v "$(pwd)"/example.sh:/app/example.sh \
    scalesocket/scalesocket:latest \
    scalesocket /app/example.sh
INFO listening at 0.0.0.0:9000</code></pre>
                    </div>
                    <p class="pt-4">
                        The above starts ScaleSocket on the default port, exposing a websocket endpoint at <span
                            class="font-mono bg-sky-50 rounded p-1 dark:text-slate-100 dark:bg-slate-800">localhost:9000/exampleroom</span>,
                        where
                        "exampleroom" is the <i>room</i> to connect to. The first connection to a specific room will
                        start the shell script process and subsequent connections will be routed to that process.
                    </p>
                    <p>
                        We can test the endpoint using curl
                    </p>
                    <div class="mt-4 overflow-scroll rounded shadow-lg dark:shadow-cyan-600/10 bg-slate-800">
                        <pre class="min-h-full text-xs md:text-xs-2 language-console"><code class="relative block text-slate-200 dark:text-slate-100 p-4 dark:bg-slate-800">$ curl --include \
       --no-buffer \
       --http1.1 \
       --header "Connection: Upgrade" \
       --header "Upgrade: websocket" \
       --header "Sec-WebSocket-Key: SGVsbG8sIHdvcmxkIQ==" \
       --header "Sec-WebSocket-Version: 13" \
       http://localhost:9000/myexampleroom
�{"message": "hello world"}�{"message": "goodbye"}%</code></pre>
                    </div>
                    <p>
                        or, if you have installed <a class="text-cyan-600" href="https://github.com/vi/websocat">websocat</a>, we
                        can test
                        the endpoint using it
                    </p>
                    <div class="mt-4 overflow-scroll rounded shadow-lg dark:shadow-cyan-600/10 bg-slate-800">
                        <pre class="min-h-full text-xs md:text-xs-2 language-console"><code class="relative block text-slate-200 dark:text-slate-100 p-4 dark:bg-slate-800">$ websocat --text --exit-on-eof ws://127.0.0.1:9000/myexampleroom
{"message": "hello world"}
{"message": "goodbye"}</code></pre>
                    </div>
                    <p class="pt-4">
                        There we have it. A simple websocket server with room support in a few lines of bash.
                    </p>
                </div>
            </div>
        </section>
        <section>
            <div class="flex flex-row flex-wrap items-start justify-center max-w-full mx-4">
                <div class="flex w-auto lg:w-64 justify-center mx-8 mb-8">
                    <h1 class="inline text-4xl whitespace-normal font-bold text-transparent bg-clip-text bg-gradient-to-br from-green-400 to-blue-600 text-center"
                        id="further-reading">Futher reading.</h1>
                </div>
                <div class="grow flex-col max-w-2xl min-w-full md:min-w-[28rem] space-y-2">
                    <h1 class="text-2xl font-bold text-teal-500">Examples.</h1>
                    <p>
                        There are some <a href="https://github.com/scalesocket/website/tree/main/examples"
                            class="text-cyan-600">examples</a> on github.
                    </p>
                    <h1 class="text-2xl font-bold text-teal-500">Command line usage.</h1>
                    <p>
                        For available command line arguments, see <span
                            class="font-mono bg-sky-50 rounded p-1 dark:text-slate-100 dark:bg-slate-800">scalesocket
                            --help</span> or the <a
                            href="https://github.com/scalesocket/scalesocket#command-line-arguments"
                            class="text-cyan-600">readme</a> on github.
                    </p>
                </div>
            </div>
        </section>
    </div>
    <script>hljs.highlightAll();</script>
    <footer class="text-gray-400 border-gray-100 dark:border-gray-600 border-t mt-6">
        <div class="text-center p-6">
            © 2023 &mdash; ScaleSocket &mdash; Made in the EU
        </div>
    </footer>
    </div>
</body>

</html>